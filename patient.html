<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Patient Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">HIE Using Blockchain</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="index.html">Home</a>
            </li>
          </ul>
           
          </div>
        </div>
      </nav>
    <h1>Healthcare Data</h1>
    <div class="main-content">
      <div class="container mt-7">
        <!-- Table -->
        
        <div class="row">
          <div class="col-xl-8 m-auto order-xl-1">
            <div class="card ">
              <div class="card-header bg-white border-1">
                <div class="row align-items-center">
                  <div class="col-8">
                    <h3 class="mb-0">My account</h3>
                  </div>
                  
                </div>
              </div>
              <!-- <hr class="my-4"> -->
              <div class="card-body">
                <form>
                  <h6 class="heading-small text-muted mb-4">User information</h6>
                  <div class="pl-lg-4">
                    <div class="row">
                      <div class="col-lg-6">
                        <div class="form-group focused">
                          <label class="form-control-label" for="input-username">Patient ID</label>
                          <input type="text" id="pid" class="form-control form-control-alternative" placeholder="0x4nsdknvl56sdvsd78" >
                        </div>
                      </div>
                      <div class="col-lg-6">
                        <div class="form-group">
                          <label class="form-control-label" for="input-email">Email address</label>
                          <input type="email" id="input-email" class="form-control form-control-alternative" placeholder="example@gmail.com">
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-lg-6">
                        <div class="form-group focused">
                          <label class="form-control-label" for="input-first-name">Name</label>
                          <input type="text" id="name" class="form-control form-control-alternative" placeholder="Name">
                        </div>
                      </div>
                      <div class="col-lg-6">
                        <div class="form-group focused">
                          <label class="form-control-label" for="input-last-name">DOB</label>
                          <input type="text" id="dob" class="form-control form-control-alternative" placeholder="mm/dd/yyyy" >
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- <hr class="my-4">   -->
                  <!-- Address -->
                  <!-- <h6 class="heading-small text-muted mb-4">Contact information</h6> -->
                  <div class="pl-lg-4">
                    <div class="row">
                      <div class="col-md-12">
                        <div class="form-group focused">
                          <label class="form-control-label" for="input-address">Phone Number</label>
                          <input id="input-address" class="form-control form-control-alternative" placeholder="+91 XXXXX XXXXX" type="text">
                        </div>
                      </div>
                    </div>
                  </div>
                    
                  
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    


    <!-- <h1>Diagnosis</h1>
    <table class="table">
        <thead>
          <tr>
            <th scope="col">Sr. No.</th>
            <th scope="col">Diagnosis </th>
            <th scope="col">Doctor name</th>
            <th scope="col">Prescription</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td scope="row">1</td>
            <td>Mark</td>
            <td>Otto</td>
            <td>@mdo</td>
          </tr>
          
        </tbody>
      </table> -->
      <script>
        $(document).ready(function()
         {
             web3 = new Web3(web3.currentProvider);
             var address="0x338CB7cD8243A42ec95961b965E78DE8D066d524";
             var abi =[
{
 "constant": false,
 "inputs": [
   {
     "name": "con",
     "type": "int256"
   }
 ],
 "name": "giveContact",
 "outputs": [],
 "payable": false,
 "stateMutability": "nonpayable",
 "type": "function"
},
{
 "constant": false,
 "inputs": [
   {
     "name": "DOB",
     "type": "string"
   }
 ],
 "name": "giveDOB",
 "outputs": [],
 "payable": false,
 "stateMutability": "nonpayable",
 "type": "function"
},
{
 "constant": false,
 "inputs": [
   {
     "name": "em",
     "type": "string"
   }
 ],
 "name": "giveEmail",
 "outputs": [],
 "payable": false,
 "stateMutability": "nonpayable",
 "type": "function"
},
{
 "constant": false,
 "inputs": [
   {
     "name": "nm",
     "type": "string"
   }
 ],
 "name": "giveName",
 "outputs": [],
 "payable": false,
 "stateMutability": "nonpayable",
 "type": "function"
},
{
 "constant": false,
 "inputs": [
   {
     "name": "p",
     "type": "string"
   }
 ],
 "name": "givePid",
 "outputs": [],
 "payable": false,
 "stateMutability": "nonpayable",
 "type": "function"
},
{
 "constant": false,
 "inputs": [
   {
     "name": "pd",
     "type": "string"
   }
 ],
 "name": "givePrevDia",
 "outputs": [],
 "payable": false,
 "stateMutability": "nonpayable",
 "type": "function"
},
{
 "constant": false,
 "inputs": [
   {
     "name": "rd",
     "type": "string"
   }
 ],
 "name": "giveRecentDia",
 "outputs": [],
 "payable": false,
 "stateMutability": "nonpayable",
 "type": "function"
},
{
 "inputs": [],
 "payable": false,
 "stateMutability": "nonpayable",
 "type": "constructor"
},
{
 "constant": true,
 "inputs": [],
 "name": "getContact",
 "outputs": [
   {
     "name": "",
     "type": "int256"
   }
 ],
 "payable": false,
 "stateMutability": "view",
 "type": "function"
},
{
 "constant": true,
 "inputs": [],
 "name": "getDOB",
 "outputs": [
   {
     "name": "",
     "type": "string"
   }
 ],
 "payable": false,
 "stateMutability": "view",
 "type": "function"
},
{
 "constant": true,
 "inputs": [],
 "name": "getEmail",
 "outputs": [
   {
     "name": "",
     "type": "string"
   }
 ],
 "payable": false,
 "stateMutability": "view",
 "type": "function"
},
{
 "constant": true,
 "inputs": [],
 "name": "getName",
 "outputs": [
   {
     "name": "",
     "type": "string"
   }
 ],
 "payable": false,
 "stateMutability": "view",
 "type": "function"
},
{
 "constant": true,
 "inputs": [],
 "name": "getPid",
 "outputs": [
   {
     "name": "",
     "type": "string"
   }
 ],
 "payable": false,
 "stateMutability": "view",
 "type": "function"
},
{
 "constant": true,
 "inputs": [],
 "name": "getPrevDia",
 "outputs": [
   {
     "name": "",
     "type": "string"
   }
 ],
 "payable": false,
 "stateMutability": "view",
 "type": "function"
},
{
 "constant": true,
 "inputs": [],
 "name": "getRecentDia",
 "outputs": [
   {
     "name": "",
     "type": "string"
   }
 ],
 "payable": false,
 "stateMutability": "view",
 "type": "function"
}
];


             contract=new web3.eth.Contract(abi, address);
             displayPatientData();
              // displayDiagnosisData();
        });
        async function displayPatientData() {
          const pidElement = document.getElementById('pid');
          const emailElement = document.getElementById('input-email');
          const nameElement = document.getElementById('name');
          const dobElement = document.getElementById('dob');

          // Retrieve data from the smart contract
          const pid = await contract.methods.getPid().call();
          const email = await contract.methods.getEmail().call();
          const name = await contract.methods.getName().call();
          const dob = await contract.methods.getDOB().call();
          
          pidElement.value = pid;
          emailElement.value = email;
          nameElement.value = name;
          dobElement.value = dob;
        }
        async function displayDiagnosisData() {
          const diagnosisElement = document.getElementById('diagnosis');
          const doctorElement = document.getElementById('doctor');
          const prescriptionElement = document.getElementById('prescription');

          // Retrieve data from the smart contract
          const diagnosis = await contract.methods.getRecentDia().call();
          const doctor = await contract.methods.getDoctorName().call();
          const prescription = await contract.methods.getPrescription().call();

          // Update HTML elements with the retrieved data
          diagnosisElement.textContent = diagnosis;
          doctorElement.textContent = doctor;
          prescriptionElement.textContent = prescription;
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js" integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD" crossorigin="anonymous"></script>
  </body>
</html>